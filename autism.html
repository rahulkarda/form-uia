<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autism</title>
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
         input{
            font-size: 25px;
        }
  label{
    color: rgb(16, 8, 46);
    font-weight: bolder;
  }
  p{
    text-align: center;
    font-size: 45px;
  }
    </style>
</head>
<body>
    <p>A test by Community</p>
    <fieldset style="width: fit-content; margin: 0 auto; font-size: 30px;">
        
        <form id="myForm">
            <div class="form-group">
          <label for="exampleInputmaths1">Maths marks</label>
          <input id="maths" name="maths" type="maths" class="form-control" aria-describedby="mathsHelp" placeholder="Enter maths marks">
        </div>
        <div class="form-group">
          <label for="exampleInputenglish1">English marks</label>
          <input id="english" name="english" type="english" class="form-control"  placeholder="Enter english marks">
        </div>
        <div class="form-group">
            <label for="exampleInputreading1">Reading Comprehension</label>
            <input id="reading" name="reading" type="english" class="form-control" placeholder="Enter reading marks">
          </div>
        
        <button id="submit" class="btn btn-primary" type="submit">Submit</button>
      </form>
    </fieldset>
    <div>
        
        <input type="hidden" name="totalScore" id="totalScore">

        <div class="less-than-5" style="display:none;">low score</div>
        <div class="less-than-10" style="display:none;">med score</div>
        <div class="less-than-25" style="display:none;">high score</div>
    </div>
</body>
<script>
    console.log('test')
    // var totalScore;
    function Calculate(){
        console.log(maths)
        console.log('hi')
            var maths = document.getElementById('maths').value;
            var english = document.getElementById('english').value; 
            var reading = document.getElementById('reading').value; 
            // document.getElementById('totalScore').value = parseFloat(maths).toFixed(2)*parseFloat(score2a).toFixed(2);
            var totalScore = maths + english + reading;
            
           //    console.log(totalScore)
     updateDIV = function() {
                if(totalScore <= 5){
                    document.querySelector('.less-than-5').style.display = 'block'
                }
                // var myValue = $('#totalScore').val();
                
                else if(totalScore <= 10)
                {
                    document.querySelector('.less-than-10').style.display = 'block'
                }
                else if(totalScore >= 11)
                {
                    document.querySelector('.less-than-25').style.display = 'block'
                }
            };
            updateDIV();
    }
    var form = document.getElementById('myForm');
form.onsubmit = function(event){
    event.preventDefault()
    Calculate()
        var xhr = new XMLHttpRequest();
        var formData = new FormData(form);
        //open the request
        xhr.open('POST','http://localhost:12001/slowLearnerClass')
        xhr.setRequestHeader("Content-Type", "application/json");

        //send the form data
        xhr.send(JSON.stringify(Object.fromEntries(formData)));

        // xhr.onreadystatechange = function() {
        //     if (xhr.readyState == XMLHttpRequest.DONE) {
        //         form.reset(); //reset form after AJAX success or do something else
        //     }
        // }
        //Fail the onsubmit to avoid page refresh.
        return false; 
    }
//     document.querySelector['#myForm'].addEventListener('submit', (event) => {
//     // event.preventDefault();
//     // TODO do something here to show user that form is being submitted
//     fetch('http://localhost:12001/slowLearnerClass', {
//         method: 'POST',
//         body: new URLSearchParams(new FormData(event.target)) // event.target is the form
//     }).then((resp) => {
//         return resp.json(); // or resp.text() or whatever the server sends
//     }).then((body) => {
//         // TODO handle body
//     }).catch((error) => {
//         // TODO handle error
//     });
// });
    
    
</script>
</html>